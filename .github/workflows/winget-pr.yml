name: Create WinGet PR

on:
  release:
    types: [created]

jobs:
  create-pr:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v4
      with:
        token: ${{ secrets.PAT_RELEASE }}
        commit-message: Update manifest for ${{ github.event.release.tag_name }}
        committer: GitHub Actions <actions@github.com>
        author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
        branch: update-winget-manifest
        base: microsoft/winget-pkgs
        path: manifests/YOUR_PUBLISHER/YOUR_APPNAME
        delete-branch: true